# Changelog

## Jul 28 - Aug 13, 2025

- refactor: removed unnecessary environment variables and made some previously required variables optional
- refactor: allowed to backfill a number of chains in parallel
- refactor: added workaround to use only migrations in database updates
- refactor: updated orphan blocks to start from the canonical tip instead of the 5th parent; added a counter table for blocks and transactions based on this mechanism
- refactor: added a total gas counter for a specific block and for each chain
- fix: fungible account queries must return null if an account doesn't exist
- feat: added transfers field in non fungible account queries
- fix: sequelize transaction not being finalized in streaming
- refactor: removed unnecessary KDA/USD price update logs when running graphql service
- fix: bugs and improvements on transactions query
- feat: allowed to fetch nft transfers on transfers query
- feat: added regression tests to compare hackachain and kadena graphql apis after a code change
- fix: started to track transfers where amount is in a object format
- fix: missing transaction details fetching on the all transactions query case

## May 21 - Jul 25, 2025

- docs: DEXs API documentation
- fix: transfers count field in transaction type
- fix: use isCoinbase flag in transactions counter; use an auxiliary filter if only chainId was feat: provided in transactions query
- fix: adjust query logic when only first or last was provided
- fix: made fungibleAccount queries use chainweb-node directly
- fix: blocksFromDepth and blocksFromDepth pagination
- fix: circulating coins value
- fix: transactions cursor pagination
- fix: missing ssl config
- fix: adjusted the all transactions fetch logic in the database repository
- fix: the error in streaming by sequalize transaction
- fix: removed the duplicated index (pool_stats_pairid_timestamp_idx) on down function as well
- fix: changed the blocksFromHeight response to return blocks in ascending order based on the startHeight parameter
- fix: improve effectiveSyncMinHeight calculation logic in backfill process
- fix: sanitize data in SaveTransactionDetails to prevent unsupported Unicode errors
- fix: update backfill process to use effectiveSyncMinHeight and rename max function
- fix: adjust nextHeight calculation in backfill process
- fix: backfill time analysis
- fix: no debug on production
- fix: the order error in pools and luiquidity-balances
- fix: the after error
- fix: after error in pools and liquidity-balances
- fix: the false of hasNextPage in pools and liquidity-positions
- fix: the pool-transaction timestamp error
- fix: the error in liquidity position
- fix: the error to show 0 fee data if there are no swaps
- fix: the limit calculation error
- fix: added missing create pool transaction migration
- fix: sequelize.sync and migrations approach conflict
- fix: the empty transaction error in pools query
- fix: missing transaction id during event creation on the streaming process
- fix: use tsconfig-paths to run scrips in dev mode
- fix: added create table migrations for DEX Protocol Data
- fix: the path error in pair service
- fix: resolve the reviews
- fix: the return type for pool-query-resolver
- fix: old graphql import error
- fix: resolve conflicts
- fix: alias resolution inside a container; missing dotenv-cli package
- fix: missing nfts
- fix: graphql hot reload and subscription tests
- remove: duplicated index
- remove: duplicate code to fetch pool data
- remove: env testing
- remove: env example from git ignore
- refactor: removed unused devcontainer configuration
- refactor: changed complexity calculation
- refactor: removed old graphql code
- refactor: changed gasPrice type in graphql schema
- refactor: improved balances backfill; normalized the gas price format in the database to a decimal to ensure consistency
- refactor: removed unnecessary backfill code
- refactor: increase max complexity to 4k
- refactor: use DEFAULT_PROTOCOL in module names
- refactor: creating new path for wss
- refactor: the namespace
- refactor: added canonical flag to the Events table
- refactor: added canonical = true on backfill
- refactor: the contract address
- refactor: decimal from (20,2) to (20,10)
- refactor: liquidity-positions
- refactor: primary key from int to string in pair
- refactor: the total supply when adding/removing liquidity
- refactor: the pool-resolver
- refactor: the sushi namespace
- refactor: splitted the backfill steps in batches to make it faster
- refactor: query params in pools
- refactor: query params in liquidity-position
- refactor: graphql query for pool-transaction
- refactor: scope into span
- refactor: rename example env
- refactor: added a database index for pactid; adjusted how to fetch a cross chain transfer
- feat: added custom database script to run a postgres with pgbackrest inside a docker container
- feat: orphan blocks mechanism
- feat: added coinbase field in block queries
- feat: added latest transactions query and subscription
- feat: removing impractical allowed origin method
- feat: set env without affecting existing services
- feat: enhance SSL configuration for database connections with optional CA validation
- feat: kadena ssl auth config
- feat: displaying block height when throwing errors
- feat: adding some configs for a faster postgres
- feat: calculate tvlUsd in real time in pool query
- feat: transacionCount24h to the PoolStats
- feat: get chart data by hours and days
- feat: store poolstats data by dateonly
- feat: query pairs by the protocol
- feat: group pools by id
- feat: more args for charts and transactions data in the pool query
- feat: logic to process changes in liquidity balances
- feat: get a token price by the protocol
- feat: tokenPrice and tokenPrices queries
- feat: token address in the token query and fix the empty transaction error in pools query
- feat: protocolAddress in pools query
- feat: query dexMetrics by protocol
- feat: migration for new index in pair model
- feat: create a pair if it doesn't exist when updating reserves
- feat: sort events by the transaction creationtime
- feat: sort events by the block height in the backfill
- feat: sentry plugin
- feat: add backfill function for pair tables

## May 13 - May 20, 2025

- merge: PR of Sushi
  - docs: api readme
  - feat: dex schemas
  - feat: dex metrics
  - feat: schema resolvers
  - feat: backfill historical data
  - feat: oracle for KDA price
  - feat: processing new payloads
  - feat: added streaming
- fix: missing table migrations for Sushi PR
- fix: missing transaction id when creating event
- fix: missing table associations for Sushi PR
- fix: legibility of env variables
- fix: alias resolution inside container on package.json
- fix: missing dotenv-cli
- feat: sentry plugin to track index usage
- feat: using env array instead of hardcoded items

## May 6 - May 13, 2025

- fix: invalid format of creationtime of coinbase transactions
- fix: missing NFTs on nonFungibleAccount queries
- fix: order index property for events in streaming process
- fix: changed node info validator to accept nullable a node service date
- refactor: removed dead code
- refactor: adjusted file locations/paths
- feat: health route for status 200
- feat: monitoring service with slack integration

## April 22 - May 6, 2025

- docs: comprehensive codebase documentation
- perf: compound cursor for blockFromHeight
- perf: getEventsWithQualifiedName improved for requestKey param
- refactor: improved missing blocks velocity
- refactor: created a separated class to handle query builder of events
- fix: blocks from depth query
- fix: minimumDepth argument in transaction and events queries
- fix: minimumDepth argument in transactions query with query builder approach
- fix: incorrect blocks from depth response
- fix: missing index migrations for transactions and transactionsDetails
- fix: transaction order response when creation time is the same
- fix: missing encoding of cursor ID when length of pagination equals one
- fix: transaction counter for association with a particular block
- fix: cross-chain-transfer field
- fix: fungible accounts returning data for non-existent accounts
- fix: fungible accounts not returning when publicKey=accountName
- fix: removed extra filter for endHeight in the query blocksFromHeight
- fix: removed stack traces from GraphQL
- fix: transfers query using block hash as filter
- fix: blocks from depth subscription
- tests: non-fungible chain account
- tests: non-fungible account
- tests: blocks from height
- tests: blocks from depth
- tests: fungible chain accounts by public key
- tests: fungible accounts by public key
- tests: fungible chain accounts
- tests: fungible chain account
- tests: fungible account
- tests: graph configuration
- tests: network info
- tests: nodes query
- tests: node query
- tests: pact query query
- tests: time report
- tests: transaction query
- tests: block query
- tests: tokens query
- tests: transactions by public key query
- tests: smoke test
- tests: chainweb-node
- tests: coin-circulation
- tests: difficulty
- tests: hashrate
- tests: helpers
- tests: int-uint-64
